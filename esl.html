<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .forecast-info div {
      border: 1px solid #ddd;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
    }

    img {
      width: 50px;
      height: 50px;
    }
  </style>
</head>

<body>
  <h1>Weather App</h1>
  <input type="text" id="cityInput" placeholder="Enter a city in Egypt" />
  <button id="getWeather">Get Weather</button>

  <div class="weather-info">
    <h2 id="cityName"></h2>
    <p id="temperature"></p>
    <p id="description"></p>
    <img id="currentIcon" alt="Weather Icon" />
  </div>

  <div class="forecast-info">
    <h3>3-Day Forecast:</h3>
    <div id="forecast"></div>
  </div>





  <script>
    const apiKey = "787f5ac38c8d46be95d133218240512";
    const baseUrl = "https://api.weatherapi.com/v1/forecast.json";

    document.getElementById("getWeather").addEventListener("click", () => {
      const city = document.getElementById("cityInput").value;

      if (city === "") {
        alert("Please enter a city name");
        return;
      }

      fetch(`${baseUrl}?key=${apiKey}&q=${city}&days=3&aqi=no&alerts=no`)
        .then(response => {
          if (!response.ok) {
            throw new Error("City not found");
          }
          return response.json();
        })
        .then(data => {
          // عرض الطقس الحالي
          document.getElementById("cityName").textContent = `City: ${data.location.name}, ${data.location.country}`;
          document.getElementById("temperature").textContent = `Temperature: ${data.current.temp_c}°C`;
          document.getElementById("description").textContent = `Condition: ${data.current.condition.text}`;

          // عرض أيقونة الطقس الحالي
          const currentIconUrl = data.current.condition.icon.startsWith("//")
            ? `https:${data.current.condition.icon}`
            : data.current.condition.icon;
          document.getElementById("currentIcon").src = currentIconUrl;

          // عرض التوقعات لـ 3 أيام
          const forecastElement = document.getElementById("forecast");
          forecastElement.innerHTML = "";

          data.forecast.forecastday.forEach(day => {
            const date = day.date;
            const maxTemp = day.day.maxtemp_c; // درجة الحرارة الكبرى
            const minTemp = day.day.mintemp_c; // درجة الحرارة الصغرى
            const condition = day.day.condition.text;

            // تأكد من أن رابط الأيقونة صحيح
            const iconUrl = day.day.condition.icon.startsWith("//")
              ? `https:${day.day.condition.icon}`
              : day.day.condition.icon;

            const dayElement = document.createElement("div");
            dayElement.innerHTML = `
          <p><strong>${date}</strong></p>
          <img src="${iconUrl}" alt="Weather Icon" />
          <p>Max Temp: ${maxTemp}°C</p>
          <p>Min Temp: ${minTemp}°C</p>
          <p>Condition: ${condition}</p>
        `;
            forecastElement.appendChild(dayElement);
          });
        })
        .catch(error => {
          console.error(error);
          alert("Error fetching weather data. Please try again.");
        });
    });

  </script>
</body>

</html>